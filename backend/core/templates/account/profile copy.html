{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Mein Bereich" %}{% endblock %}

{% block content %}
<div class="doctor-profile-area pb-140">
    <div class="container">
        <div class="row justify-content-center g-4">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-12">
                <div class="doctor-profile-image">
                    <div class="user-avatar-large">
                        {{ user.first_name|slice:":1"|upper }}{{ user.last_name|slice:":1"|upper }}
                    </div>
                    <div class="info-details">
                        <h3>{{ user.first_name }} {{ user.last_name }}</h3>
                        <span class="email">{{ user.email }}</span>
                        {% if subscription %}
                        <span class="tag">{{ subscription.plan.name }}</span>
                        {% else %}
                        <span class="tag inactive">{% trans "Kein Abo" %}</span>
                        {% endif %}
                    </div>
                    
                    <div class="quick-stats">
                        <div class="stat-item">
                            <span class="number">{{ medications.count }}</span>
                            <span class="label">{% trans "Medikamente" %}</span>
                        </div>
                        <div class="stat-item">
                            <span class="number">{{ recent_orders.count }}</span>
                            <span class="label">{% trans "Bestellungen" %}</span>
                        </div>
                    </div>
                    
                    <div class="info-social">
                        <h5>{% trans "Schnellzugriff" %}</h5>
                        <ul class="quick-links">
                            <li><a href="{% url 'account_profile' %}"><i class="ri-user-line"></i> {% trans "Profil" %}</a></li>
                            <li><a href="{% url 'account_documents' %}"><i class="ri-file-list-line"></i> {% trans "Dokumente" %}</a></li>
                            <li><a href="{% url 'account_payments' %}"><i class="ri-bank-card-line"></i> {% trans "Zahlungen" %}</a></li>
                            <li><a href="{% url 'account_logout' %}"><i class="ri-logout-box-line"></i> {% trans "Abmelden" %}</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9 col-md-12">
                <div class="doctor-profile-desc">
                    <div class="profile-content">
                        <h2>{% trans "Willkommen" %}, {{ user.first_name }}!</h2>
                        <span class="sub">{% trans "Ihr pers√∂nlicher Bereich" %}</span>
                        
                        {% if subscription %}
                        <span class="tag active">{{ subscription.get_status_display }}</span>
                        {% endif %}
                        
                        <div class="info">
                            <ul class="left">
                                <li>
                                    <span class="mid">{% trans "N√§chste Lieferung" %}</span>
                                    {% if subscription %}
                                    <strong class="semi">{{ subscription.current_period_end|date:"d.m.Y" }}</strong>
                                    {% else %}
                                    <strong class="semi">-</strong>
                                    {% endif %}
                                </li>
                                <li>
                                    <span class="mid">{% trans "Intervall" %}</span>
                                    {% if subscription %}
                                    <strong class="semi">{{ subscription.plan.get_interval_days_display }}</strong>
                                    {% else %}
                                    <strong class="semi">-</strong>
                                    {% endif %}
                                </li>
                                <li>
                                    <span class="mid">{% trans "Mitglied seit" %}</span>
                                    <strong class="semi">{{ user.date_joined|date:"d.m.Y" }}</strong>
                                </li>
                            </ul>
                            {% if not subscription %}
                            <div class="right-btn">
                                <a class="default-btn" href="{% url 'pricing' %}">
                                    <span class="left"><svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none"><path d="M17.8077 0.98584H1.19231C0.810154 0.98584 0.5 1.29599 0.5 1.67815C0.5 2.0603 0.810154 2.37046 1.19231 2.37046H16.1361L0.702846 17.8041C0.4325 18.0744 0.4325 18.5126 0.702846 18.783C0.838192 18.9183 1.01508 18.9858 1.19231 18.9858C1.36954 18.9858 1.54677 18.9183 1.68177 18.783L17.1154 3.34938V18.2935C17.1154 18.6757 17.4255 18.9858 17.8077 18.9858C18.1898 18.9858 18.5 18.6757 18.5 18.2935V1.67815C18.5 1.29599 18.1898 0.98584 17.8077 0.98584Z" fill="white"/></svg></span>
                                    {% trans "Abo starten" %}
                                    <span class="right"><svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none"><path d="M17.8077 0.98584H1.19231C0.810154 0.98584 0.5 1.29599 0.5 1.67815C0.5 2.0603 0.810154 2.37046 1.19231 2.37046H16.1361L0.702846 17.8041C0.4325 18.0744 0.4325 18.5126 0.702846 18.783C0.838192 18.9183 1.01508 18.9858 1.19231 18.9858C1.36954 18.9858 1.54677 18.9183 1.68177 18.783L17.1154 3.34938V18.2935C17.1154 18.6757 17.4255 18.9858 17.8077 18.9858C18.1898 18.9858 18.5 18.6757 18.5 18.2935V1.67815C18.5 1.29599 18.1898 0.98584 17.8077 0.98584Z" fill="white"/></svg></span>
                                </a>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <!-- Profile Tabs -->
                    <div class="profile-tabs">
                        <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
                            <li class="nav-item">
                                <button type="button" class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-overview">{% trans "√úbersicht" %}</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-medications">{% trans "Medikamente" %}</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-orders">{% trans "Bestellungen" %}</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-documents">{% trans "Dokumente" %}</button>
                            </li>
                        </ul>
                        
                        <div class="tab-content">
                            <!-- Tab: Overview -->
                            <div class="tab-pane fade show active" id="tab-overview">
                                {% if not subscription %}
                                <div class="alert-banner">
                                    <div class="alert-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                                    </div>
                                    <div class="alert-content">
                                        <h4>{% trans "Starten Sie jetzt!" %}</h4>
                                        <p>{% trans "W√§hlen Sie einen Tarif, um Ihren Blister-Service zu aktivieren." %}</p>
                                    </div>
                                    <a href="{% url 'pricing' %}" class="btn btn-primary">{% trans "Tarife ansehen" %}</a>
                                </div>
                                {% endif %}
                                
                                <!-- Calendar Widget -->
                                <div class="calendar-container">
                                    <div class="month">
                                        <button id="prev-month"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="22" viewBox="0 0 12 22" fill="none"><path d="M0 11C0 11.2557 0.0977488 11.5117 0.292998 11.707L10.2929 21.7069C10.6837 22.0977 11.3164 22.0977 11.7069 21.7069C12.0974 21.3162 12.0977 20.6834 11.7069 20.2929L2.41399 11L11.7069 1.70697C12.0977 1.31622 12.0977 0.683468 11.7069 0.292969C11.3162 -0.0975304 10.6834 -0.0977802 10.2929 0.292969L0.292998 10.293C0.0977488 10.4882 0 10.7442 0 11Z" fill="#5A6A85"/></svg></button>
                                        <span id="month-year"></span>
                                        <button id="next-month"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="22" viewBox="0 0 12 22" fill="none"><path d="M12 11C12 11.2557 11.9023 11.5117 11.707 11.707L1.70705 21.7069C1.31631 22.0977 0.683559 22.0977 0.293061 21.7069C-0.097437 21.3162 -0.097687 20.6834 0.293061 20.2929L9.58601 11L0.293061 1.70697C-0.097687 1.31622 -0.097687 0.683468 0.293061 0.292969C0.683809 -0.0975304 1.31656 -0.0977802 1.70705 0.292969L11.707 10.293C11.9023 10.4882 12 10.7442 12 11Z" fill="#5A6A85"/></svg></button>
                                    </div>
                                    <div class="weekdays">
                                        <div>{% trans "SO" %}</div><div>{% trans "MO" %}</div><div>{% trans "DI" %}</div><div>{% trans "MI" %}</div><div>{% trans "DO" %}</div><div>{% trans "FR" %}</div><div>{% trans "SA" %}</div>
                                    </div>
                                    <div class="days" id="calendar-days"></div>
                                    <div class="delivery-info">
                                        <h4 id="delivery-title">{% trans "Ihre Lieferungen" %}</h4>
                                        <div id="delivery-slots">
                                            {% if subscription %}
                                            <div class="slot delivery">{% trans "N√§chste Lieferung:" %} {{ subscription.current_period_end|date:"d.m.Y" }}</div>
                                            {% else %}
                                            <div class="slot empty">{% trans "Keine geplanten Lieferungen" %}</div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Quick Actions -->
                                <div class="availability-reviews">
                                    <h3>{% trans "Schnellaktionen" %}</h3>
                                    <div class="row justify-content-center g-4">
                                        <div class="col-lg-6 col-md-6">
                                            <a href="{% url 'account_medication_add' %}" class="action-card">
                                                <div class="action-icon med"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.5 20.5L3.5 13.5C1.5 11.5 1.5 8 3.5 6C5.5 4 9 4 11 6L18 13C20 15 20 18.5 18 20.5C16 22.5 12.5 22.5 10.5 20.5Z"/><line x1="12" y1="6" x2="12" y2="18"/><line x1="6" y1="12" x2="18" y2="12"/></svg></div>
                                                <h4>{% trans "Medikament hinzuf√ºgen" %}</h4>
                                                <p>{% trans "Neues Medikament zu Ihrem Blister" %}</p>
                                            </a>
                                        </div>
                                        <div class="col-lg-6 col-md-6">
                                            <a href="{% url 'account_document_upload' %}" class="action-card">
                                                <div class="action-icon doc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="18" x2="12" y2="12"/><line x1="9" y1="15" x2="15" y2="15"/></svg></div>
                                                <h4>{% trans "Rezept hochladen" %}</h4>
                                                <p>{% trans "Dokument oder Rezept einreichen" %}</p>
                                            </a>
                                        </div>
                                        <div class="col-lg-6 col-md-6">
                                            <a href="{% url 'deliveries:tracking_form' %}" class="action-card">
                                                <div class="action-icon track"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg></div>
                                                <h4>{% trans "Sendung verfolgen" %}</h4>
                                                <p>{% trans "Lieferstatus pr√ºfen" %}</p>
                                            </a>
                                        </div>
                                        <div class="col-lg-6 col-md-6">
                                            <a href="{% url 'contact' %}" class="action-card">
                                                <div class="action-icon help"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
                                                <h4>{% trans "Hilfe & Kontakt" %}</h4>
                                                <p>{% trans "Fragen? Wir helfen gerne" %}</p>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tab: Medications -->
                            <div class="tab-pane fade" id="tab-medications">
                                <div class="section-header">
                                    <h3>{% trans "Meine Medikamente" %}</h3>
                                    <a href="{% url 'account_medication_add' %}" class="btn btn-primary btn-sm">+ {% trans "Hinzuf√ºgen" %}</a>
                                </div>
                                {% if medications %}
                                <div class="medications-grid">
                                    {% for med in medications %}
                                    <div class="medication-card">
                                        <div class="med-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#336AEA" stroke-width="2"><path d="M10.5 20.5L3.5 13.5C1.5 11.5 1.5 8 3.5 6C5.5 4 9 4 11 6L18 13C20 15 20 18.5 18 20.5C16 22.5 12.5 22.5 10.5 20.5Z"/></svg>
                                        </div>
                                        <div class="med-info">
                                            <h4>{{ med.name }}</h4>
                                            <span class="dosage">{{ med.dosage }}</span>
                                            <div class="schedule">
                                                {% if med.morning %}<span class="time">üåÖ {% trans "Morgens" %}</span>{% endif %}
                                                {% if med.noon %}<span class="time">‚òÄÔ∏è {% trans "Mittags" %}</span>{% endif %}
                                                {% if med.evening %}<span class="time">üåÜ {% trans "Abends" %}</span>{% endif %}
                                                {% if med.night %}<span class="time">üåô {% trans "Nachts" %}</span>{% endif %}
                                            </div>
                                        </div>
                                        <a href="{% url 'account_medication_edit' med.pk %}" class="edit-btn">{% trans "Bearbeiten" %}</a>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1.5"><path d="M10.5 20.5L3.5 13.5C1.5 11.5 1.5 8 3.5 6C5.5 4 9 4 11 6L18 13C20 15 20 18.5 18 20.5C16 22.5 12.5 22.5 10.5 20.5Z"/></svg>
                                    <h4>{% trans "Noch keine Medikamente" %}</h4>
                                    <p>{% trans "F√ºgen Sie Ihre Medikamente hinzu, um Ihren Blister vorzubereiten." %}</p>
                                    <a href="{% url 'account_medication_add' %}" class="btn btn-primary">{% trans "Erstes Medikament hinzuf√ºgen" %}</a>
                                </div>
                                {% endif %}
                            </div>
                            <!-- Tab: Orders -->
                            <div class="tab-pane fade" id="tab-orders">
                                <div class="section-header">
                                    <h3>{% trans "Bestellungen" %}</h3>
                                </div>
                                {% if recent_orders %}
                                <div class="orders-list">
                                    {% for order in recent_orders %}
                                    <div class="order-card">
                                        <div class="order-status {% if order.status == 'delivered' %}delivered{% elif order.status == 'shipped' %}shipped{% else %}pending{% endif %}">
                                            {% if order.status == 'delivered' %}
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            {% elif order.status == 'shipped' %}
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                                            {% else %}
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                            {% endif %}
                                        </div>
                                        <div class="order-info">
                                            <h4>{{ order.order_number }}</h4>
                                            <span class="date">{{ order.created_at|date:"d.m.Y" }}</span>
                                            <span class="period">{{ order.period_start|date:"d.m" }} - {{ order.period_end|date:"d.m.Y" }}</span>
                                        </div>
                                        <div class="order-badge">
                                            <span class="badge {% if order.status == 'delivered' %}bg-success{% elif order.status == 'shipped' %}bg-info{% else %}bg-secondary{% endif %}">
                                                {{ order.get_status_display }}
                                            </span>
                                        </div>
                                        <a href="{% url 'account_order_detail' order.order_number %}" class="order-link">{% trans "Details" %} ‚Üí</a>
                                    </div>
                                    {% endfor %}
                                </div>
                                <a href="{% url 'account_orders' %}" class="btn btn-outline-primary mt-3">{% trans "Alle Bestellungen" %}</a>
                                {% else %}
                                <div class="empty-state">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1.5"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                                    <h4>{% trans "Noch keine Bestellungen" %}</h4>
                                    <p>{% trans "Ihre Bestellhistorie erscheint hier." %}</p>
                                </div>
                                {% endif %}
                            </div>
                            
                            <!-- Tab: Documents -->
                            <div class="tab-pane fade" id="tab-documents">
                                <div class="section-header">
                                    <h3>{% trans "Dokumente" %}</h3>
                                    <a href="{% url 'account_document_upload' %}" class="btn btn-primary btn-sm">+ {% trans "Hochladen" %}</a>
                                </div>
                                {% if user.documents.exists %}
                                <div class="documents-grid">
                                    {% for doc in user.documents.all %}
                                    <div class="document-card">
                                        <div class="doc-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#336AEA" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                                        </div>
                                        <div class="doc-info">
                                            <h4>{{ doc.get_document_type_display }}</h4>
                                            <span class="date">{{ doc.created_at|date:"d.m.Y" }}</span>
                                        </div>
                                        <span class="doc-status {% if doc.status == 'approved' %}approved{% elif doc.status == 'rejected' %}rejected{% else %}pending{% endif %}">
                                            {{ doc.get_status_display }}
                                        </span>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                                    <h4>{% trans "Keine Dokumente" %}</h4>
                                    <p>{% trans "Laden Sie Rezepte und Versichertenkarte hoch." %}</p>
                                    <a href="{% url 'account_document_upload' %}" class="btn btn-primary">{% trans "Dokument hochladen" %}</a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* Avatar */
.user-avatar-large {
    width: 120px; height: 120px;
    background: linear-gradient(135deg, #336AEA, #10B981);
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    color: #fff; font-size: 36px; font-weight: 700; margin: 0 auto 20px;
}
.doctor-profile-image { background: #fff; border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
.doctor-profile-image .info-details { text-align: center; margin-bottom: 20px; }
.doctor-profile-image .info-details h3 { font-size: 20px; margin-bottom: 5px; }
.doctor-profile-image .info-details .email { color: #5A6A85; font-size: 14px; display: block; margin-bottom: 10px; }
.doctor-profile-image .tag { background: #10B981; color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 12px; }
.doctor-profile-image .tag.inactive { background: #9CA3AF; }

/* Quick Stats */
.quick-stats { display: flex; justify-content: center; gap: 30px; padding: 20px 0; border-top: 1px solid #f0f0f0; border-bottom: 1px solid #f0f0f0; margin: 20px 0; }
.quick-stats .stat-item { text-align: center; }
.quick-stats .number { display: block; font-size: 24px; font-weight: 700; color: #336AEA; }
.quick-stats .label { font-size: 12px; color: #5A6A85; }

/* Quick Links */
.quick-links { list-style: none; padding: 0; margin: 15px 0 0; }
.quick-links li { margin-bottom: 8px; }
.quick-links a { display: flex; align-items: center; gap: 10px; padding: 10px 15px; border-radius: 10px; color: #5A6A85; text-decoration: none; transition: all 0.3s; }
.quick-links a:hover { background: #f8f9fa; color: #336AEA; }

/* Profile Content */
.doctor-profile-desc { background: #fff; border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
.profile-content h2 { font-size: 28px; margin-bottom: 5px; }
.profile-content .sub { color: #5A6A85; }
.profile-content .tag.active { background: #10B981; color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 12px; margin-left: 10px; }
.profile-content .info { margin-top: 25px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; }
.profile-content .info .left { display: flex; gap: 30px; list-style: none; padding: 0; margin: 0; }
.profile-content .info .left li { text-align: center; }
.profile-content .info .left .mid { display: block; font-size: 13px; color: #5A6A85; margin-bottom: 5px; }
.profile-content .info .left .semi { font-size: 16px; }

/* Tabs */
.profile-tabs { margin-top: 30px; }
.profile-tabs .nav-tabs { border-bottom: 2px solid #f0f0f0; gap: 5px; }
.profile-tabs .nav-link { border: none; color: #5A6A85; padding: 12px 20px; border-radius: 10px 10px 0 0; }
.profile-tabs .nav-link.active { background: #336AEA; color: #fff; }
.profile-tabs .tab-content { padding: 30px 0; }

/* Alert Banner */
.alert-banner { display: flex; align-items: center; gap: 20px; background: linear-gradient(135deg, #FEF3C7, #FDE68A); border-radius: 15px; padding: 20px; margin-bottom: 30px; }
.alert-banner .alert-icon { width: 50px; height: 50px; background: #F59E0B; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; }
.alert-banner .alert-content { flex: 1; }
.alert-banner h4 { margin: 0 0 5px; font-size: 16px; }
.alert-banner p { margin: 0; font-size: 14px; color: #92400E; }

/* Calendar */
.calendar-container { background: #f8f9fa; border-radius: 15px; padding: 25px; margin-bottom: 30px; }
.calendar-container .month { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.calendar-container .month span { font-size: 18px; font-weight: 600; }
.calendar-container .month button { background: none; border: none; cursor: pointer; padding: 10px; }
.calendar-container .weekdays { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; font-size: 12px; color: #5A6A85; margin-bottom: 10px; }
.calendar-container .days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
.calendar-container .days div { text-align: center; padding: 10px; border-radius: 8px; cursor: pointer; }
.calendar-container .days div:hover { background: #e0e0e0; }
.calendar-container .days div.active { background: #336AEA; color: #fff; }
.calendar-container .days div.delivery { background: #10B981; color: #fff; }
.calendar-container .days div.prev-date, .calendar-container .days div.next-date { color: #ccc; }
.delivery-info { margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0; }
.delivery-info h4 { font-size: 14px; margin-bottom: 10px; }
.delivery-info .slot { background: #fff; padding: 10px 15px; border-radius: 8px; font-size: 14px; }
.delivery-info .slot.delivery { border-left: 3px solid #10B981; }

/* Action Cards */
.action-card { display: block; background: #f8f9fa; border-radius: 15px; padding: 25px; text-decoration: none; color: inherit; transition: all 0.3s; border: 2px solid transparent; }
.action-card:hover { border-color: #336AEA; transform: translateY(-3px); }
.action-card .action-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; }
.action-icon.med { background: rgba(51, 106, 234, 0.1); color: #336AEA; }
.action-icon.doc { background: rgba(16, 185, 129, 0.1); color: #10B981; }
.action-icon.track { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }
.action-icon.help { background: rgba(139, 92, 246, 0.1); color: #8B5CF6; }
.action-card h4 { font-size: 16px; margin-bottom: 5px; }
.action-card p { font-size: 13px; color: #5A6A85; margin: 0; }

/* Section Header */
.section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.section-header h3 { font-size: 18px; margin: 0; }

/* Medication Cards */
.medications-grid { display: flex; flex-direction: column; gap: 15px; }
.medication-card { display: flex; align-items: center; gap: 15px; background: #f8f9fa; border-radius: 12px; padding: 20px; }
.medication-card .med-icon { width: 45px; height: 45px; background: rgba(51, 106, 234, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
.medication-card .med-info { flex: 1; }
.medication-card .med-info h4 { font-size: 16px; margin: 0 0 5px; }
.medication-card .dosage { font-size: 13px; color: #5A6A85; }
.medication-card .schedule { margin-top: 8px; display: flex; gap: 10px; flex-wrap: wrap; }
.medication-card .time { font-size: 12px; background: #fff; padding: 3px 8px; border-radius: 5px; }
.medication-card .edit-btn { color: #336AEA; text-decoration: none; font-size: 14px; }

/* Order Cards */
.orders-list { display: flex; flex-direction: column; gap: 15px; }
.order-card { display: flex; align-items: center; gap: 15px; background: #f8f9fa; border-radius: 12px; padding: 20px; }
.order-card .order-status { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.order-status.delivered { background: rgba(16, 185, 129, 0.1); color: #10B981; }
.order-status.shipped { background: rgba(59, 130, 246, 0.1); color: #3B82F6; }
.order-status.pending { background: rgba(156, 163, 175, 0.1); color: #9CA3AF; }
.order-card .order-info { flex: 1; }
.order-card .order-info h4 { font-size: 15px; margin: 0 0 5px; }
.order-card .date, .order-card .period { font-size: 13px; color: #5A6A85; margin-right: 15px; }
.order-card .order-link { color: #336AEA; text-decoration: none; font-size: 14px; }

/* Document Cards */
.documents-grid { display: flex; flex-direction: column; gap: 15px; }
.document-card { display: flex; align-items: center; gap: 15px; background: #f8f9fa; border-radius: 12px; padding: 20px; }
.document-card .doc-icon { width: 45px; height: 45px; background: rgba(51, 106, 234, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
.document-card .doc-info { flex: 1; }
.document-card .doc-info h4 { font-size: 15px; margin: 0 0 5px; }
.doc-status { padding: 5px 12px; border-radius: 20px; font-size: 12px; }
.doc-status.approved { background: #D1FAE5; color: #065F46; }
.doc-status.rejected { background: #FEE2E2; color: #991B1B; }
.doc-status.pending { background: #FEF3C7; color: #92400E; }

/* Empty State */
.empty-state { text-align: center; padding: 50px 20px; }
.empty-state svg { margin-bottom: 20px; }
.empty-state h4 { margin-bottom: 10px; }
.empty-state p { color: #5A6A85; margin-bottom: 20px; }

@media (max-width: 991px) {
    .profile-content .info .left { flex-wrap: wrap; gap: 15px; }
    .quick-stats { gap: 15px; }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Calendar
    const monthYear = document.getElementById('month-year');
    const daysContainer = document.getElementById('calendar-days');
    const prevBtn = document.getElementById('prev-month');
    const nextBtn = document.getElementById('next-month');
    
    let currentDate = new Date();
    const months = ['Januar', 'Februar', 'M√§rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'];
    
    function renderCalendar() {
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();
        const prevLastDate = new Date(year, month, 0).getDate();
        const today = new Date();
        
        monthYear.textContent = months[month] + ' ' + year;
        daysContainer.innerHTML = '';
        
        // Previous month
        for (let i = firstDay; i > 0; i--) {
            daysContainer.innerHTML += `<div class="prev-date">${prevLastDate - i + 1}</div>`;
        }
        // Current month
        for (let i = 1; i <= lastDate; i++) {
            const isToday = i === today.getDate() && month === today.getMonth() && year === today.getFullYear();
            daysContainer.innerHTML += `<div class="${isToday ? 'active' : ''}">${i}</div>`;
        }
        // Next month
        const remaining = 42 - (firstDay + lastDate);
        for (let i = 1; i <= remaining; i++) {
            daysContainer.innerHTML += `<div class="next-date">${i}</div>`;
        }
    }
    
    prevBtn?.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(); });
    nextBtn?.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(); });
    renderCalendar();
});
</script>
{% endblock %}