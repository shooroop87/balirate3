{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Dokument hochladen" %}{% endblock %}

{% block content %}
<div class="doctor-profile-area pb-140">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 mb-4">
                {% include "account/includes/sidebar.html" %}
            </div>

            <div class="col-lg-9">
                <div class="profile-card">
                    <div class="card-header">
                        <h2>{% trans "Dokument hochladen" %}</h2>
                    </div>
                    <div class="card-body">
                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            
                            <div class="mb-3">
                                <label class="form-label">{% trans "Dokumenttyp" %} *</label>
                                <select name="document_type" class="form-select" required>
                                    <option value="prescription">{% trans "Rezept" %}</option>
                                    <option value="insurance_card">{% trans "Versichertenkarte" %}</option>
                                    <option value="id_document">{% trans "Ausweisdokument" %}</option>
                                    <option value="other">{% trans "Sonstiges" %}</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">{% trans "Datei" %} *</label>
                                <div class="upload-area" id="uploadArea">
                                    <input type="file" name="file" id="fileInput" accept=".pdf,.jpg,.jpeg,.png" required>
                                    <div class="upload-content">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#336AEA" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                                        <p>{% trans "Klicken oder Datei hierher ziehen" %}</p>
                                        <span>{% trans "PDF, JPG, PNG (max. 10MB)" %}</span>
                                    </div>
                                    <div class="file-selected" style="display: none;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                                        <span class="filename"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">{% trans "Beschreibung (optional)" %}</label>
                                <textarea name="description" class="form-control" rows="3" 
                                          placeholder="{% trans 'z.B. Rezept von Dr. Müller vom 15.01.2025' %}"></textarea>
                            </div>
                            
                            <div class="alert alert-info">
                                <strong>{% trans "Hinweis:" %}</strong>
                                {% trans "Bitte achten Sie darauf, dass das Dokument gut lesbar ist. Alle Dokumente werden von unserem Team geprüft." %}
                            </div>
                            
                            <div class="d-flex gap-2">
                                <button type="submit" class="default-btn">{% trans "Hochladen" %}</button>
                                <a href="{% url 'account_documents' %}" class="default-btn">{% trans "Abbrechen" %}</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.profile-card { background: #fff; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); overflow: hidden; }
.profile-card .card-header { background: transparent; border-bottom: 1px solid #f0f0f0; padding: 20px 25px; }
.profile-card .card-header h2 { font-size: 20px; margin: 0; }
.profile-card .card-body { padding: 25px; }

.upload-area {
    border: 2px dashed #e0e0e0;
    border-radius: 12px;
    padding: 40px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}
.upload-area:hover, .upload-area.dragover {
    border-color: #336AEA;
    background: rgba(51, 106, 234, 0.05);
}
.upload-area input[type="file"] {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}
.upload-content p {
    margin: 15px 0 5px;
    font-weight: 600;
}
.upload-content span {
    color: #5A6A85;
    font-size: 14px;
}
.file-selected {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}
.file-selected .filename {
    font-weight: 500;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('fileInput');
    const uploadContent = uploadArea.querySelector('.upload-content');
    const fileSelected = uploadArea.querySelector('.file-selected');
    const filenameSpan = fileSelected.querySelector('.filename');

    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            uploadContent.style.display = 'none';
            fileSelected.style.display = 'flex';
            filenameSpan.textContent = this.files[0].name;
        }
    });

    uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.classList.add('dragover');
    });

    uploadArea.addEventListener('dragleave', function() {
        this.classList.remove('dragover');
    });

    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        this.classList.remove('dragover');
        fileInput.files = e.dataTransfer.files;
        fileInput.dispatchEvent(new Event('change'));
    });
});
</script>
{% endblock %}