{% extends "account/base.html" %}
{% load static i18n %}

{% block title %}{% trans "Neues Passwort setzen" %}{% endblock %}

{% block auth_content %}
<h1>{% trans "Neues Passwort setzen" %}</h1>

{% if token_fail %}
<div class="alert alert-danger">
    {% trans "Der Link zum Zurücksetzen des Passworts ist ungültig oder abgelaufen. Bitte fordern Sie einen neuen Link an." %}
</div>
<div class="auth-links">
    <a href="{% url 'account_reset_password' %}" class="default-btn">
        {% trans "Neuen Link anfordern" %}
    </a>
</div>
{% else %}
<p class="subtitle">{% trans "Geben Sie Ihr neues Passwort ein." %}</p>

{% if form.errors %}
<div class="alert alert-danger">
    {% for field in form %}
        {% for error in field.errors %}
            <p>{{ error }}</p>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <p>{{ error }}</p>
    {% endfor %}
</div>
{% endif %}

<form method="post">
    {% csrf_token %}
    
    <div class="mb-3">
        <label for="id_password1" class="form-label">{% trans "Neues Passwort" %} *</label>
        <input type="password" 
               name="password1" 
               id="id_password1" 
               class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
               placeholder="{% trans 'Mindestens 8 Zeichen' %}"
               required 
               autofocus>
        <div class="form-text text-muted small mt-2">
            <ul class="mb-0 ps-3">
                <li>{% trans "Mindestens 8 Zeichen" %}</li>
                <li>{% trans "Nicht zu ähnlich zu Ihren persönlichen Daten" %}</li>
                <li>{% trans "Kein häufig verwendetes Passwort" %}</li>
            </ul>
        </div>
    </div>
    
    <div class="mb-4">
        <label for="id_password2" class="form-label">{% trans "Passwort bestätigen" %} *</label>
        <input type="password" 
               name="password2" 
               id="id_password2" 
               class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
               placeholder="{% trans 'Passwort wiederholen' %}"
               required>
    </div>
    
    <button type="submit" class="default-btn">
        {% trans "Passwort ändern" %}
    </button>
</form>
{% endif %}

<div class="auth-links">
    <a href="/?login=1">{% trans "Zurück zur Anmeldung" %}</a>
</div>
{% endblock %}