{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Profil" %}{% endblock %}

{% block content %}
<div class="doctor-profile-area pb-140">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 mb-4">
                {% include "account/includes/sidebar.html" %}
            </div>

            <div class="col-lg-9">
                <div class="profile-card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h2>{% trans "Mein Profil" %}</h2>
                        <a href="{% url 'account_profile_edit' %}" class="btn btn-primary btn-sm">{% trans "Bearbeiten" %}</a>
                    </div>
                    <div class="card-body">
                        <!-- Persönliche Daten -->
                        <div class="info-section">
                            <h4>{% trans "Persönliche Daten" %}</h4>
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>{% trans "Vorname" %}</label>
                                    <span>{{ user.first_name|default:"-" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Nachname" %}</label>
                                    <span>{{ user.last_name|default:"-" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "E-Mail" %}</label>
                                    <span>{{ user.email }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Telefon" %}</label>
                                    <span>{{ user.phone|default:"-" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Geburtsdatum" %}</label>
                                    <span>{{ user.date_of_birth|date:"d.m.Y"|default:"-" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Sprache" %}</label>
                                    <span>{{ user.get_language_display }}</span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Lieferadresse -->
                        <div class="info-section">
                            <div class="section-header">
                                <h4>{% trans "Lieferadresse" %}</h4>
                                <a href="{% url 'account_address' %}" class="btn btn-outline-primary btn-sm">{% trans "Ändern" %}</a>
                            </div>
                            {% if user.street %}
                            <div class="address-box">
                                <p>{{ user.first_name }} {{ user.last_name }}</p>
                                <p>{{ user.street }}</p>
                                <p>{{ user.postal_code }} {{ user.city }}</p>
                                <p>{{ user.get_country_display }}</p>
                            </div>
                            {% else %}
                            <p class="text-muted">{% trans "Keine Adresse hinterlegt." %}</p>
                            {% endif %}
                        </div>

                        <hr>

                        <!-- Versicherung -->
                        <div class="info-section">
                            <h4>{% trans "Krankenversicherung" %}</h4>
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>{% trans "Krankenkasse" %}</label>
                                    <span>{{ user.insurance_company|default:"-" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Versichertennummer" %}</label>
                                    <span>{{ user.insurance_number|default:"-" }}</span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Konto -->
                        <div class="info-section">
                            <h4>{% trans "Konto" %}</h4>
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>{% trans "Mitglied seit" %}</label>
                                    <span>{{ user.date_joined|date:"d.m.Y" }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Letzte Anmeldung" %}</label>
                                    <span>{{ user.last_login|date:"d.m.Y H:i"|default:"-" }}</span>
                                </div>
                            </div>
                            <div class="mt-3">
                                <a href="{% url 'account_delete' %}" class="btn btn-outline-danger btn-sm">{% trans "Konto löschen" %}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.profile-area{padding:140px 0}
.profile-card{background:#fff;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,.08);overflow:hidden}
.profile-card .card-header{background:0 0;border-bottom:1px solid #f0f0f0;padding:25px 30px}
.profile-card .card-header h2{font-size:20px;margin:0}
.profile-card .card-body{padding:30px}
.info-section{margin-bottom:25px}
.info-section h4{font-size:16px;color:#336AEA;margin-bottom:20px;font-weight:600}
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.section-header h4{margin:0}
.info-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}
@media(max-width:768px){.info-grid{grid-template-columns:1fr}}
.info-item label{display:block;font-size:13px;color:#5A6A85;margin-bottom:5px}
.info-item span{font-size:15px;font-weight:500;color:#2A3547}
.address-box{background:#f8f9fa;border-radius:12px;padding:20px}
.address-box p{margin:0 0 5px;font-size:15px}
.address-box p:last-child{margin:0}
hr{border-color:#f0f0f0;margin:25px 0}
</style>
{% endblock %}